# PWA Architecture & Flow Diagram

## ğŸ“ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER DEVICE                              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              BROWSER / APP WINDOW                  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚          index.html                          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Head meta tags (PWA config)              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Manifest link: manifest.json             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Apple touch icon                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Theme color                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚          script.js                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Prayer time logic                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Adhan playback                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Notifications trigger                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚          pwa.js                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Service Worker registration              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Notification permission request          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Install prompt handling                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Update checking                          â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚       SERVICE WORKER (sw.js)                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Install Event                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Cache static assets                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Fetch Event                                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ API Requests: Network-first              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Fallback to cache if offline          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Static Assets: Cache-first               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚     â””â”€ Update in background                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Message Handler                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Receive notification requests             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Notification Click Handler                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Focus or open app window                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Background Sync                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Update prayer times when online          â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚    CACHE STORAGE                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Cache: prayer-times-v1                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ index.html                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ style.css                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ script.js                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ pwa.js                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ sw.js                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ manifest.json                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ a1.mp3 (Adhan)                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ api responses (prayer times)             â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  NOTIFICATION API                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Permission: GRANTED                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Permission request shown to user         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Welcome notification on first load       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Prayer time notifications                â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  MANIFEST.JSON                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  "name": "Prayer Times Dashboard"            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  "display": "standalone"                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  "icons": [...]                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  "screenshots": [...]                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  "theme_color": "#1b4332"                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  "start_url": "/"                            â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  NETWORK       â”‚
                    â”‚  (HTTPS)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  API   â”‚      â”‚   MANIFEST  â”‚    â”‚   ICONS     â”‚
    â”‚ Server â”‚      â”‚   .json     â”‚    â”‚   .png      â”‚
    â”‚        â”‚      â”‚             â”‚    â”‚             â”‚
    â”‚ /api/  â”‚      â”‚ /manifest   â”‚    â”‚ /icons/     â”‚
    â”‚        â”‚      â”‚             â”‚    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ User Journey Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIRST VISIT                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   User opens app (http://localhost:3000)
                    â”‚
                    â–¼
   Browser loads index.html
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
   Parse HTML   Register SW   Request Permission
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
    Load CSS   pwa.js calls  Show banner
    Load JS    navigator.     to user
    Load SW    serviceWorker
              .register()
                    â”‚
                    â–¼
            Service Worker activates
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
    Cache        Check      Initialize
    assets       updates     notifications
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
    Cache         Show       Request
    active        update      notification
                notification  permission


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 PRAYER TIME NOTIFICATION                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   JavaScript clock tick (every 1 second)
                    â”‚
                    â–¼
   checkPrayerTime() runs
                    â”‚
                    â–¼
   Is current time === prayer time?
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ YES                   â”‚ NO
        â–¼                       â–¼
   playAdhan()            Continue
        â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚        â”‚
    â–¼        â–¼
 Play     Send message
 audio    to Service Worker
    â”‚        â”‚
    â”‚        â–¼
    â”‚   Show Notification
    â”‚        â”‚
    â”‚        â–¼
    â”‚   User can:
    â”‚   â”œâ”€ Click to focus
    â”‚   â”œâ”€ Click to focus app
    â”‚   â””â”€ Swipe to dismiss


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   OFFLINE MODE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Internet disconnects
          â”‚
          â–¼
   User tries to fetch data
          â”‚
          â–¼
   Service Worker intercepts request
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚           â”‚
    â–¼           â–¼
 API call   Static asset?
    â”‚           â”‚
    â–¼           â–¼
 Network     Cache hit?
 unavailable  â”‚
    â”‚      â”Œâ”€â”€â”´â”€â”€â”
    â”‚      â”‚ YES â”‚ NO
    â”‚      â–¼     â–¼
    â”‚   Return  Network
    â”‚   cached  fail
    â”‚   data
    â”‚      â”‚
    â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  â–¼
         User gets response
         (cached or real)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 INSTALLATION FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   User sees install button/banner
                    â”‚
                    â–¼
   User clicks "Install"
                    â”‚
                    â–¼
   Browser prompts confirmation
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚
    "Install"             "Cancel"
        â”‚                       â”‚
        â–¼                       â–¼
   Create app shell    Close prompt
        â”‚
    â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”
    â”‚   â”‚   â”‚   â”‚
    â–¼   â–¼   â–¼   â–¼
   Add  Set  Use  Create
   icon theme manifest
   home color           icon on
   screen              home
    â”‚                  screen
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼
    App installed!
    User can launch
    from home screen
```

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User       â”‚
â”‚   Interactionâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  index.html   â”‚
   â”‚  script.js    â”‚
   â”‚  pwa.js       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
       â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                            â”‚
       â–¼                            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Load Prayerâ”‚         â”‚  Register       â”‚
   â”‚ Times Data â”‚         â”‚  Service Worker â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚
         â–¼                        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Fetch /api/prayer-times        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
    Online       Offline
       â”‚             â”‚
       â–¼             â–¼
   Network       Cache
   call          hit
       â”‚             â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Update UI    â”‚
        â”‚ with data    â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Start       â”‚
        â”‚  checking    â”‚
        â”‚  prayer time â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        Every second
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Compare current â”‚
        â”‚  time with prayerâ”‚
        â”‚  times           â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        Match found?
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
      YES            NO
        â”‚             â”‚
        â–¼             â–¼
    Trigger    Continue
    Adhan      checking
        â”‚
        â”œâ”€ Play audio
        â”œâ”€ Send notification
        â””â”€ Update UI
```

## ğŸ¯ Notification Timeline

```
MINUTE 0  | Service Worker registered, Cache ready
          | Notification permission prompt shown
          |
MINUTE 1  | Welcome notification sent
          | "Notifications enabled! You will receive Adhan alerts"
          |
04:30     | (Example: At prayer time)
          | Current time matches prayer time in prayer list
          |
04:30:00  | checkPrayerTime() detects match
          | playAdhan() called
          | â”œâ”€ Audio starts playing
          | â””â”€ pwaInstance.showPrayerNotification() called
          |
04:30:01  | Service Worker receives message
          | Notification displayed to user
          | "ğŸ•Œ Fajr Prayer Time"
          | "It's time for Fajr prayer at 04:30"
          |
04:30:02  | User can click notification
          | â”œâ”€ Open app (focus window)
          | â””â”€ Or dismiss
          |
04:30:30  | Audio finishes playing (~30 seconds)
          | Adhan complete
          |
NEXT HOUR | Continue checking every second
          | Ready for next prayer time
```

## ğŸ”— Component Communication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ index.html  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Loads scripts
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                      â”‚
       â–¼                      â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚script.js â”‚          â”‚ pwa.js  â”‚
   â”‚          â”‚          â”‚         â”‚
   â”‚ â”œâ”€ Load  â”‚          â”‚ â”œâ”€ SW   â”‚
   â”‚ â”‚  prayerâ”‚          â”‚ â”‚registration
   â”‚ â”‚  times â”‚          â”‚ â”‚
   â”‚ â”‚        â”‚          â”‚ â”œâ”€Notify
   â”‚ â”œâ”€ Check â”‚          â”‚ â”‚permission
   â”‚ â”‚ time   â”‚          â”‚ â”‚
   â”‚ â”‚ every  â”‚          â”‚ â”œâ”€Install
   â”‚ â”‚ sec    â”‚          â”‚ â”‚prompt
   â”‚ â”‚        â”‚          â”‚ â”‚
   â”‚ â””â”€ Adhan â”‚          â”‚ â””â”€Update
   â”‚   play   â”‚â”€â”        â”‚  check
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                â”‚             â”‚
                â”‚   Calls     â”‚
                â”‚   Service   â”‚
                â”‚   Worker    â”‚
                â”‚   via       â”‚
                â”‚   postMsg   â”‚
                â”‚             â”‚
                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  sw.js   â”‚
                 â”‚          â”‚
                 â”‚ â”œâ”€Cache  â”‚
                 â”‚ â”œâ”€Fetch  â”‚
                 â”‚ â”œâ”€Notify â”‚
                 â”‚ â”œâ”€Sync   â”‚
                 â”‚ â””â”€Listen â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Installation Variants

```
ANDROID CHROME
   â”œâ”€ Install button in address bar
   â”œâ”€ Or menu â†’ "Install app"
   â”œâ”€ Confirmation dialog
   â”œâ”€ Creates app launcher
   â”œâ”€ Opens in standalone mode
   â””â”€ Full PWA features

iOS SAFARI  
   â”œâ”€ Share button â†’ "Add to Home Screen"
   â”œâ”€ Named by user
   â”œâ”€ Uses web app icon
   â”œâ”€ Opens fullscreen
   â”œâ”€ Limited notification support
   â””â”€ No background sync

WINDOWS/MAC CHROME
   â”œâ”€ Install in address bar
   â”œâ”€ Creates desktop shortcut
   â”œâ”€ Standalone window (no address bar)
   â”œâ”€ Full PWA features
   â””â”€ Taskbar/dock icon

FIREFOX
   â”œâ”€ Menu â†’ "Install app"
   â”œâ”€ Adds to home/launcher
   â”œâ”€ Standalone window
   â”œâ”€ Limited notification support
   â””â”€ Basic PWA features

EDGE (Chromium)
   â”œâ”€ Similar to Chrome
   â”œâ”€ Install button in address bar
   â”œâ”€ Full PWA support
   â””â”€ Windows integrated
```

---

This architecture provides:
- âœ… Fast loading (cached assets)
- âœ… Works offline (cache + fallback)
- âœ… Installable (manifest + icons)
- âœ… Notifications (service worker + API)
- âœ… Responsive (meta viewport)
- âœ… Secure (HTTPS + CSP)
- âœ… Discoverable (manifest + metadata)
